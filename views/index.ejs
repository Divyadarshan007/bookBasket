<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Book Basket</title>
    <link href="/assets/css/bootstrap.min.css" rel="stylesheet">
    <link rel="icon" href="/assets/images/books-stack-of-three-svgrepo-com.svg">
</head>

<body class="bg-light">
    <div class="container w-50 mt-5">
        <div class="card shadow p-4">
            <h3 class="text-center mb-4">Add New Book</h3>
            <form action="/add-book" method="post">
                <div class="mb-3">
                    <label class="form-label">Book Name</label>
                    <input type="text" name="name" class="form-control" placeholder="Enter book name">
                </div>

                <div class="mb-3">
                    <label class="form-label">Author</label>
                    <input type="text" name="author" class="form-control" placeholder="Enter author name">
                </div>

                <div class="mb-3">
                    <label class="form-label">Price (â‚¹)</label>
                    <input type="number" name="price" class="form-control" placeholder="Enter price">
                </div>

                <div class="mb-3">
                    <label class="form-label">Publish Date</label>
                    <input type="date" class="form-control" name="date">
                </div>

                <div class="mb-3">
                    <label class="form-label">Genre</label>
                    <select class="form-select" name="genre">
                        <option value="">Select genre</option>
                        <option value="Fiction">Fiction</option>
                        <option value="Non Fiction">Non Fiction</option>
                        <option value="Mystery">Mystery</option>
                        <option value="Romance">Romance</option>
                        <option value="Science">Science</option>
                        <option value="Fantasy">Fantasy</option>
                    </select>
                </div>

                <div class="form-check mb-3">
                    <input class="form-check-input" name="isBestSeller" type="checkbox" id="bestseller" value="yes">
                    <label class="form-check-label" for="bestseller">
                        Is Bestseller?
                    </label>
                </div>

                <div class="mb-3">
                    <label class="form-label d-block">Book Format</label>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="format" value="Hardcover" id="Hardcover">
                        <label class="form-check-label" for="Hardcover">Hardcover</label>
                    </div>

                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="format" value="Paperback" id="Paperback">
                        <label class="form-check-label" for="Paperback">Paperback</label>
                    </div>

                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="format" value="eBook" id="eBook">
                        <label class="form-check-label" for="eBook">eBook</label>
                    </div>
                </div>
                <div class="d-flex justify-content-center">
                    <button class="btn btn-primary  mt-3">Submit</button>
                </div>
            </form>
        </div>
    </div>

    <div class="container mt-5">
        <table class="table table-dark table-hover table-striped text-center">
            <thead>
                <tr>
                    <th>No.</th>
                    <th>Book Name</th>
                    <th>Author</th>
                    <th>Genre</th>
                    <th>Price</th>
                    <th>Date</th>
                    <th>isBestSeller ?</th>
                    <th>Format</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                <% bookData.map((book, idx)=>{ %>
                    <tr>
                        <td>
                            <%= idx + 1 %>
                        </td>
                        <td>
                            <%= book.name %>
                        </td>
                        <td>
                            <%= book.author %>
                        </td>
                        <td>
                            <%= book.genre %>
                        </td>
                        <td>
                            <%= book.price %>
                        </td>
                        <td>
                            <%= book.date %>
                        </td>
                        <td>
                            <%= book.isBestSeller %>
                        </td>
                        <td>
                            <%= book.format %>
                        </td>
                        <td>
                            <div>
                                <a href="/edit-book/<%=book.id%>" class="btn btn-success">Edit</a>
                                <button class="btn btn-danger" onclick="handeleDelete('<%= book.id %>')">Delete</button>
                            </div>
                        </td>
                    </tr>
                    <% }) %>
            </tbody>
        </table>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script>
        const handeleDelete = (deleteId) => {
            Swal.fire({
                title: "Are you sure?",
                text: "You won't be able to revert this!",
                icon: "warning",
                showCancelButton: true,
                confirmButtonColor: "#3085d6",
                cancelButtonColor: "#d33",
                confirmButtonText: "Yes, delete it!"
            }).then((result) => {
                if (result.isConfirmed) {
                   window.location.href = `delete-book/${deleteId}`
                }
            });
        }
    </script>

</body>

</html>